[build]
default-target = "aarch64-unknown-linux-gnu"

[target.aarch64-unknown-linux-gnu]
pre-build = [
    "apt-get update && apt-get --assume-yes install curl",
    "curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y",
    ". $HOME/.cargo/env",
    "cargo install cargo-auditable",
    "echo \\#\\!/bin/sh > /bin/cargo",
    "echo \"export CARGO='/rust/bin/cargo'\" >> /bin/cargo",
    "echo 'cargo-auditable auditable \"$@\"' >> /bin/cargo",
    "chmod +x /bin/cargo",
]
